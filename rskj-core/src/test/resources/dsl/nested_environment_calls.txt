comment

// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.9;

contract CallStackDepthCaller {
    address contractToCall = address(0x0000000000000000000000000000000001000011);

    function callGetCallStackDepth() external returns(uint256) {
        (bool success, bytes memory data) = contractToCall.call(
            abi.encodeWithSignature("getCallStackDepth()")
        );

        uint256 result = abi.decode(data, (uint256));

        return result;
    }
}

contract ContractB {
    address caller;

    constructor(address _t) public {
        caller = _t;
    }

    function callStackDepthCaller() external returns(uint256) {
        (bool success, bytes memory data) = caller.call(abi.encodeWithSignature("callGetCallStackDepth()"));

        uint256 result = abi.decode(data, (uint256));

        return result;
    }
}

contract ContractA {
    address contractB;

    constructor(address _t) public {
        contractB = _t;
    }

    function callContractB() external returns(uint256) {
        (bool success, bytes memory data) = contractB.call(abi.encodeWithSignature("callStackDepthCaller()"));

        uint256 result = abi.decode(data, (uint256));

        return result;
    }
}

end

account_new acc1 20000000

# Deploy CallStackDepthCaller (address: 6252703f5ba322ec64d3ac45e56241b7d9e481ad)
transaction_build tx01
    sender acc1
    nonce 0
    receiverAddress 00
    value 0
    data 608060405263010000116000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555034801561005457600080fd5b506102d3806100646000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636ead0b3314610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527fe8ce2274000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea26469706673582212203818928a48ce84574eb24c5dd9e8bb163ca6f59074b8eb706562836d4a292f7d64736f6c63430008130033
    gas 2000000
    build

# Deploy ContractB (address: 56aa252dd82173789984fa164ee26ce2da9336ff)
# ByteCode: 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636cfb26f514610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6ead0b33000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220d7c38a4d602d4c7e7b3002b6115968a1dbe169745265d86e928cb978ef60fb5d64736f6c63430008130033
# Address CallStackDepthCaller: 0000000000000000000000006252703f5ba322ec64d3ac45e56241b7d9e481ad
# Data: 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636cfb26f514610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6ead0b33000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220d7c38a4d602d4c7e7b3002b6115968a1dbe169745265d86e928cb978ef60fb5d64736f6c634300081300330000000000000000000000006252703f5ba322ec64d3ac45e56241b7d9e481ad
transaction_build tx02
    sender acc1
    nonce 1
    receiverAddress 00
    value 0
    data 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636cfb26f514610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6ead0b33000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220d7c38a4d602d4c7e7b3002b6115968a1dbe169745265d86e928cb978ef60fb5d64736f6c634300081300330000000000000000000000006252703f5ba322ec64d3ac45e56241b7d9e481ad
    gas 2000000
    build

# Deploy ContractA (address: 27444fbce96cb2d27b94e116d1506d7739c05862)
# ByteCode: 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636428f3dc14610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6cfb26f5000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220027372f37588d14da1423c01c67b52ee4ba713f75fd5802ce9d3471e0b3a62a764736f6c63430008130033
# Address ContractB: 00000000000000000000000056aa252dd82173789984fa164ee26ce2da9336ff
# Data: 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636428f3dc14610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6cfb26f5000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220027372f37588d14da1423c01c67b52ee4ba713f75fd5802ce9d3471e0b3a62a764736f6c6343000813003300000000000000000000000056aa252dd82173789984fa164ee26ce2da9336ff
transaction_build tx03
    sender acc1
    nonce 2
    receiverAddress 00
    value 0
    data 608060405234801561001057600080fd5b506040516103ea3803806103ea833981810160405281019061003291906100db565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610108565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b6100b88161009d565b81146100c357600080fd5b50565b6000815190506100d5816100af565b92915050565b6000602082840312156100f1576100f0610078565b5b60006100ff848285016100c6565b91505092915050565b6102d3806101176000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80636428f3dc14610030575b600080fd5b61003861004e565b604051610045919061019c565b60405180910390f35b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f6cfb26f5000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505060405161011b9190610228565b6000604051808303816000865af19150503d8060008114610158576040519150601f19603f3d011682016040523d82523d6000602084013e61015d565b606091505b50915091506000818060200190518101906101789190610270565b905080935050505090565b6000819050919050565b61019681610183565b82525050565b60006020820190506101b1600083018461018d565b92915050565b600081519050919050565b600081905092915050565b60005b838110156101eb5780820151818401526020810190506101d0565b60008484015250505050565b6000610202826101b7565b61020c81856101c2565b935061021c8185602086016101cd565b80840191505092915050565b600061023482846101f7565b915081905092915050565b600080fd5b61024d81610183565b811461025857600080fd5b50565b60008151905061026a81610244565b92915050565b6000602082840312156102865761028561023f565b5b60006102948482850161025b565b9150509291505056fea2646970667358221220027372f37588d14da1423c01c67b52ee4ba713f75fd5802ce9d3471e0b3a62a764736f6c6343000813003300000000000000000000000056aa252dd82173789984fa164ee26ce2da9336ff
    gas 2000000
    build

block_build b01
    parent g00
    transactions tx01 tx02 tx03
    build

block_connect b01

# Assert best block
assert_best b01

# Call ContractA.callContractB()
transaction_build tx04
    sender acc1
    nonce 3
    receiverAddress 27444fbce96cb2d27b94e116d1506d7739c05862
    value 0
    data 6428f3dc
    gas 2000000
    build

block_build b02
    parent b01
    transactions tx04
    build

block_connect b02
